<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Kinetica for Kubernetes"><meta name=author content=Kinetica><link href=https://www.kinetica.com/7.2/Advanced/kube_vip_loadbalancer/ rel=canonical><link rel=icon href=../../assets/favicon.ico><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.12"><title>Kubernetes Cluster LoadBalancer for Bare Metal/VM Installations - Kinetica for Kubernetes</title><link rel=stylesheet href=../../assets/stylesheets/main.7e359304.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><style>.md-tag.md-tag--advanced{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.75 13c-.01-.35.15-.69.42-.92.75.16 1.45.47 2.08.92 0 .68-.56 1.24-1.25 1.24S7.76 13.69 7.75 13m6 0c.63-.44 1.33-.75 2.08-.91.27.23.43.57.42.91 0 .7-.56 1.26-1.25 1.26s-1.25-.56-1.25-1.26M12 9c-2.77-.04-5.5.65-7.93 2L4 12c0 1.23.29 2.44.84 3.54a47.642 47.642 0 0 1 14.32 0c.55-1.1.84-2.31.84-3.54l-.07-1A15.849 15.849 0 0 0 12 9m0-7a10 10 0 0 1 10 10 10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2Z"/></svg>');}.md-tag.md-tag--getting_started{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m15.1 1.81-2.83 2.83c-.77.78-.77 2.05 0 2.83l1.41 1.41-4.55 4.55-2.82-2.83L4.89 12c-4.95 5-1.39 8.5-1.39 8.5S7 24 12 19.09l1.41-1.41-2.8-2.8 4.54-4.54 1.39 1.39c.78.77 2.05.77 2.83 0L22.2 8.9l-7.1-7.09m2.83 8.47L16.55 8.9l-1.44-1.44-1.4-1.4 1.41-1.41 4.23 4.23-1.42 1.4Z"/></svg>');}.md-tag.md-tag--storage{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 2.4v8.4h-2.4V2.4H24zM0 10.8h2.4V2.4H0v8.4zm3-8.4h18v8.4H3V2.4zm12.6 4.2a1.8 1.8 0 1 0 3.6 0 1.8 1.8 0 0 0-3.6 0zm-10.8.6H12V6H4.8v1.2zm16.8 14.4H24v-8.4h-2.4v8.4zM0 21.6h2.4v-8.4H0v8.4zm3-8.4h18v8.4H3v-8.4zm12.6 4.2a1.8 1.8 0 1 0 3.6 0 1.8 1.8 0 0 0-3.6 0zM4.8 18H12v-1.2H4.8V18z"/></svg>');}.md-tag.md-tag--ingress{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22.55 6.55v10.9c0 .434-.184.749-.55.95l-9.45 5.45c-.367.2-.733.2-1.1 0L2 18.4c-.366-.201-.55-.516-.55-.95V6.55c0-.434.184-.749.55-.95L11.45.15c.367-.2.733-.2 1.1 0L22 5.6c.366.201.55.516.55.95zM21 17.8l-3.9-2.25.5-.9 3.9 2.249V6.549l-.05-.048-8.95-5.2v4.5h-1v-4.5l-9 5.2v10.398l3.9-2.248.5.899L3 17.8l8.95 5.15h.1L21 17.8zM4.55 7.675c0-.016.016-.025.05-.025h14.8c.033 0 .05.009.05.025v.075l-7.4 12.799c0 .034-.017.05-.05.05-.034 0-.05-.016-.05-.05L4.55 7.75v-.075zm6.95 5.076c0-.301-.15-.533-.45-.7L6.9 9.65h-.05v.05l4.6 7.9c.033 0 .05-.019.05-.051v-4.8zm.9-1.601 4.2-2.45H7.4l.05.051 4.15 2.399a.701.701 0 0 0 .8 0zm4.75-1.45v-.05h-.05l-4.15 2.4c-.3.167-.45.417-.45.749v4.8h.1L17.15 9.7z"/></svg>');}.md-tag.md-tag--network{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-4v2h1a1 1 0 0 1 1 1h7v2h-7a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1H2v-2h7a1 1 0 0 1 1-1h1v-2H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10Z"/></svg>');}</style><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><link href=../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style><script src=../../assets/javascripts/glightbox.min.js></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#kubernetes-cluster-loadbalancer-for-bare-metalvm-installations class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=https://www.kinetica.com title="Kinetica for Kubernetes" class="md-header__button md-logo" aria-label="Kinetica for Kubernetes" data-md-component=logo> <img src=../../assets/kinetica_logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Kinetica for Kubernetes </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Kubernetes Cluster LoadBalancer for Bare Metal/VM Installations </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/kineticadb/charts title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> kineticadb/charts </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../Setup/ class=md-tabs__link> Setup </a> </li> <li class=md-tabs__item> <a href=../ class=md-tabs__link> Advanced </a> </li> <li class=md-tabs__item> <a href=../../Operations/ class=md-tabs__link> Operations </a> </li> <li class=md-tabs__item> <a href=../../Administration/ class=md-tabs__link> Administration </a> </li> <li class=md-tabs__item> <a href=../../Architecture/ class=md-tabs__link> Architecture & Design </a> </li> <li class=md-tabs__item> <a href=../../Support/ class=md-tabs__link> Support </a> </li> <li class=md-tabs__item> <a href=../../Reference/ class=md-tabs__link> Reference </a> </li> <li class=md-tabs__item> <a href=../../tags/ class=md-tabs__link> Categories </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation hidden> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://www.kinetica.com title="Kinetica for Kubernetes" class="md-nav__button md-logo" aria-label="Kinetica for Kubernetes" data-md-component=logo> <img src=../../assets/kinetica_logo.png alt=logo> </a> Kinetica for Kubernetes </label> <div class=md-nav__source> <a href=https://github.com/kineticadb/charts title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> kineticadb/charts </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Setup/ class=md-nav__link> <span class=md-ellipsis> Setup </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Advanced </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Operations/ class=md-nav__link> <span class=md-ellipsis> Operations </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Administration/ class=md-nav__link> <span class=md-ellipsis> Administration </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Architecture/ class=md-nav__link> <span class=md-ellipsis> Architecture & Design </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Support/ class=md-nav__link> <span class=md-ellipsis> Support </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Reference/ class=md-nav__link> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../tags/ class=md-nav__link> <span class=md-ellipsis> Categories </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#kube-vip class=md-nav__link> <span class=md-ellipsis> kube-vip </span> </a> <nav class=md-nav aria-label=kube-vip> <ul class=md-nav__list> <li class=md-nav__item> <a href=#kube-vip-cloud-controller class=md-nav__link> <span class=md-ellipsis> kube-vip-cloud-controller </span> </a> </li> <li class=md-nav__item> <a href=#kubernetes-load-balancer-service class=md-nav__link> <span class=md-ellipsis> Kubernetes Load-Balancer Service </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <nav class=md-tags> <a href=../../tags/#advanced class=md-tag>Advanced</a> <a href=../../tags/#ingress class=md-tag>Ingress</a> <a href=../../tags/#installation class=md-tag>Installation</a> </nav> <h1 id=kubernetes-cluster-loadbalancer-for-bare-metalvm-installations>Kubernetes Cluster LoadBalancer for Bare Metal/VM Installations<a class=headerlink href=#kubernetes-cluster-loadbalancer-for-bare-metalvm-installations title="Permanent link">&para;</a></h1> <p>For our example we are going to enable a Kubernetes based LoadBalancer to issue IP addresses to our Kubernetes Services of type <code>LoadBalancer</code> using <a href=https://kube-vip.io/ ><code>kube-vip</code></a>.</p> <details class=example> <summary>Ingress Service is pending</summary> <p>The <code>ingress-nginx-controller</code> is currently in the <code>pending</code> state as there is no <abbr title="Kubernetes Cloud Controller Manager">CCM</abbr>/LoadBalancer <a class=glightbox href=../../images/kube_vip/pending_service.png data-type=image data-width=auto data-height=auto data-title=pending_service.png data-desc-position=bottom><img alt=pending_service.png src=../../images/kube_vip/pending_service.png></a></p> </details> <h2 id=kube-vip><code>kube-vip</code><a class=headerlink href=#kube-vip title="Permanent link">&para;</a></h2> <p>We will install two components into our Kubernetes Cluster</p> <ul> <li><a href=https://kube-vip.io/docs/usage/cloud-provider/ >kube-vip-cloud-controller</a></li> <li><a href=https://kube-vip.io/docs/usage/kubernetes-services/ >Kubernetes Load-Balancer Service</a></li> </ul> <h3 id=kube-vip-cloud-controller>kube-vip-cloud-controller<a class=headerlink href=#kube-vip-cloud-controller title="Permanent link">&para;</a></h3> <div class="admonition quote"> <p class=admonition-title>Quote</p> <p>The kube-vip cloud provider can be used to populate an IP address for Services of type LoadBalancer similar to what public cloud providers allow through a Kubernetes <abbr title="Kubernetes Cloud Controller Manager">CCM</abbr>.</p> </div> <details class=example> <summary>Install the kube-vip <abbr title="Kubernetes Cloud Controller Manager">CCM</abbr></summary> <p><a class=glightbox href=..%2Fimages%2Fkube_vip%2Fkube_vip_install_ccm.gif data-type=image data-width=auto data-height=auto data-title=kube_vip_install_ccm.gif data-desc-position=bottom><img alt=kube_vip_install_ccm.gif src=..%2Fimages%2Fkube_vip%2Fkube_vip_install_ccm.gif></a></p> </details> <div class=highlight><span class=filename>Install the kube-vip CCM</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>https://raw.githubusercontent.com/kube-vip/kube-vip-cloud-provider/main/manifest/kube-vip-cloud-controller.yaml
</span></code></pre></div> <p>Now we need to setup the required RBAC permissions: -</p> <details class=example> <summary>Install the kube-vip RBAC</summary> <p><a class=glightbox href=..%2Fimages%2Fkube_vip%2Fkube_vip_install_rbac.gif data-type=image data-width=auto data-height=auto data-title=kube_vip_install_rbac.gif data-desc-position=bottom><img alt=kube_vip_install_rbac.gif src=..%2Fimages%2Fkube_vip%2Fkube_vip_install_rbac.gif></a></p> </details> <div class=highlight><span class=filename>Install kube-vip RBAC</span><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>https://kube-vip.io/manifests/rbac.yaml
</span></code></pre></div> <p>The following ConfigMap will configure the <code>kube-vip-cloud-controller</code> to obtain IP addresses from the host networks DHCP server. i.e. the DHCP on the physical network that the host machine or VM is connected to.</p> <details class=example> <summary>Install the kube-vip ConfigMap</summary> <p><a class=glightbox href=..%2Fimages%2Fkube_vip%2Fkube_vip_install_configmap.gif data-type=image data-width=auto data-height=auto data-title=kube_vip_install_configmap.gif data-desc-position=bottom><img alt=kube_vip_install_configmap.gif src=..%2Fimages%2Fkube_vip%2Fkube_vip_install_configmap.gif></a></p> </details> <div class=highlight><span class=filename>Install the kube-vip ConfigMap</span><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubevip</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kube-system</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=nt>data</span><span class=p>:</span>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=w>  </span><span class=nt>cidr-global</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.0.0.0/32</span>
</span></code></pre></div> <p>It is possible to specify IP address ranges see <a href=https://kube-vip.io/docs/usage/cloud-provider/ >here</a>.</p> <h3 id=kubernetes-load-balancer-service>Kubernetes Load-Balancer Service<a class=headerlink href=#kubernetes-load-balancer-service title="Permanent link">&para;</a></h3> <details class=example> <summary>Obtain the Master Node IP address &amp; Interface name</summary> <p><a class=glightbox href=..%2Fimages%2Fkube_vip%2Fkube_vip_install_ip_a.gif data-type=image data-width=auto data-height=auto data-title=kube_vip_install_ip_a.gif data-desc-position=bottom><img alt=kube_vip_install_ip_a.gif src=..%2Fimages%2Fkube_vip%2Fkube_vip_install_ip_a.gif></a></p> </details> <div class=highlight><span class=filename>Obtain the Master Node IP address & Interface name</span><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>ip<span class=w> </span>a
</span></code></pre></div> <p>In this example the network interface of the master node is <code>192.168.2.180</code> and the interface is <code>enp0s1</code>.</p> <p>We need to apply the <code>kube-vip</code> daemonset but first we need to create the configuration</p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Install the kube-vip Daemonset</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-4-1> 1</a></span>
<span class=normal><a href=#__codelineno-4-2> 2</a></span>
<span class=normal><a href=#__codelineno-4-3> 3</a></span>
<span class=normal><a href=#__codelineno-4-4> 4</a></span>
<span class=normal><a href=#__codelineno-4-5> 5</a></span>
<span class=normal><a href=#__codelineno-4-6> 6</a></span>
<span class=normal><a href=#__codelineno-4-7> 7</a></span>
<span class=normal><a href=#__codelineno-4-8> 8</a></span>
<span class=normal><a href=#__codelineno-4-9> 9</a></span>
<span class=normal><a href=#__codelineno-4-10>10</a></span>
<span class=normal><a href=#__codelineno-4-11>11</a></span>
<span class=normal><a href=#__codelineno-4-12>12</a></span>
<span class=normal><a href=#__codelineno-4-13>13</a></span>
<span class=normal><a href=#__codelineno-4-14>14</a></span>
<span class=normal><a href=#__codelineno-4-15>15</a></span>
<span class=normal><a href=#__codelineno-4-16>16</a></span>
<span class=normal><a href=#__codelineno-4-17>17</a></span>
<span class=normal><a href=#__codelineno-4-18>18</a></span>
<span class=normal><a href=#__codelineno-4-19>19</a></span>
<span class=normal><a href=#__codelineno-4-20>20</a></span>
<span class=normal><a href=#__codelineno-4-21>21</a></span>
<span class=normal><a href=#__codelineno-4-22>22</a></span>
<span class=normal><a href=#__codelineno-4-23>23</a></span>
<span class=normal><a href=#__codelineno-4-24>24</a></span>
<span class=normal><a href=#__codelineno-4-25>25</a></span>
<span class=normal><a href=#__codelineno-4-26>26</a></span>
<span class=normal><a href=#__codelineno-4-27>27</a></span>
<span class=normal><a href=#__codelineno-4-28>28</a></span>
<span class=normal><a href=#__codelineno-4-29>29</a></span>
<span class=normal><a href=#__codelineno-4-30>30</a></span>
<span class=normal><a href=#__codelineno-4-31>31</a></span>
<span class=normal><a href=#__codelineno-4-32>32</a></span>
<span class=normal><a href=#__codelineno-4-33>33</a></span>
<span class=normal><a href=#__codelineno-4-34>34</a></span>
<span class=normal><a href=#__codelineno-4-35>35</a></span>
<span class=normal><a href=#__codelineno-4-36>36</a></span>
<span class=normal><a href=#__codelineno-4-37>37</a></span>
<span class=normal><a href=#__codelineno-4-38>38</a></span>
<span class=normal><a href=#__codelineno-4-39>39</a></span>
<span class=normal><a href=#__codelineno-4-40>40</a></span>
<span class=normal><a href=#__codelineno-4-41>41</a></span>
<span class=normal><a href=#__codelineno-4-42>42</a></span>
<span class=normal><a href=#__codelineno-4-43>43</a></span>
<span class=normal><a href=#__codelineno-4-44>44</a></span>
<span class=normal><a href=#__codelineno-4-45>45</a></span>
<span class=normal><a href=#__codelineno-4-46>46</a></span>
<span class=normal><a href=#__codelineno-4-47>47</a></span>
<span class=normal><a href=#__codelineno-4-48>48</a></span>
<span class=normal><a href=#__codelineno-4-49>49</a></span>
<span class=normal><a href=#__codelineno-4-50>50</a></span>
<span class=normal><a href=#__codelineno-4-51>51</a></span>
<span class=normal><a href=#__codelineno-4-52>52</a></span>
<span class=normal><a href=#__codelineno-4-53>53</a></span>
<span class=normal><a href=#__codelineno-4-54>54</a></span>
<span class=normal><a href=#__codelineno-4-55>55</a></span>
<span class=normal><a href=#__codelineno-4-56>56</a></span>
<span class=normal><a href=#__codelineno-4-57>57</a></span>
<span class=normal><a href=#__codelineno-4-58>58</a></span>
<span class=normal><a href=#__codelineno-4-59>59</a></span>
<span class=normal><a href=#__codelineno-4-60>60</a></span>
<span class=normal><a href=#__codelineno-4-61>61</a></span>
<span class=normal><a href=#__codelineno-4-62>62</a></span>
<span class=normal><a href=#__codelineno-4-63>63</a></span>
<span class=normal><a href=#__codelineno-4-64>64</a></span>
<span class=normal><a href=#__codelineno-4-65>65</a></span>
<span class=normal><a href=#__codelineno-4-66>66</a></span>
<span class=normal><a href=#__codelineno-4-67>67</a></span>
<span class=normal><a href=#__codelineno-4-68>68</a></span>
<span class=normal><a href=#__codelineno-4-69>69</a></span>
<span class=normal><a href=#__codelineno-4-70>70</a></span>
<span class=normal><a href=#__codelineno-4-71>71</a></span>
<span class=normal><a href=#__codelineno-4-72>72</a></span>
<span class=normal><a href=#__codelineno-4-73>73</a></span>
<span class=normal><a href=#__codelineno-4-74>74</a></span>
<span class=normal><a href=#__codelineno-4-75>75</a></span>
<span class=normal><a href=#__codelineno-4-76>76</a></span>
<span class=normal><a href=#__codelineno-4-77>77</a></span>
<span class=normal><a href=#__codelineno-4-78>78</a></span>
<span class=normal><a href=#__codelineno-4-79>79</a></span>
<span class=normal><a href=#__codelineno-4-80>80</a></span>
<span class=normal><a href=#__codelineno-4-81>81</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">DaemonSet</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4></a><span class=w>  </span><span class=nt>labels</span><span class=p>:</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5></a><span class=hll><span class=w>    </span><span class=nt>app.kubernetes.io/name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kube-vip-ds</span>
</span></span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6></a><span class=w>    </span><span class=nt>app.kubernetes.io/version</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v0.7.2</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7></a><span class=hll><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kube-vip-ds</span>
</span></span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kube-system</span>
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10></a><span class=w>  </span><span class=nt>selector</span><span class=p>:</span>
</span><span id=__span-4-11><a id=__codelineno-4-11 name=__codelineno-4-11></a><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span>
</span><span id=__span-4-12><a id=__codelineno-4-12 name=__codelineno-4-12></a><span class=hll><span class=w>      </span><span class=nt>app.kubernetes.io/name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kube-vip-ds</span>
</span></span><span id=__span-4-13><a id=__codelineno-4-13 name=__codelineno-4-13></a><span class=w>  </span><span class=nt>template</span><span class=p>:</span>
</span><span id=__span-4-14><a id=__codelineno-4-14 name=__codelineno-4-14></a><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-4-15><a id=__codelineno-4-15 name=__codelineno-4-15></a><span class=w>      </span><span class=nt>labels</span><span class=p>:</span>
</span><span id=__span-4-16><a id=__codelineno-4-16 name=__codelineno-4-16></a><span class=hll><span class=w>        </span><span class=nt>app.kubernetes.io/name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kube-vip-ds</span>
</span></span><span id=__span-4-17><a id=__codelineno-4-17 name=__codelineno-4-17></a><span class=w>        </span><span class=nt>app.kubernetes.io/version</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v0.7.2</span>
</span><span id=__span-4-18><a id=__codelineno-4-18 name=__codelineno-4-18></a><span class=w>    </span><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-4-19><a id=__codelineno-4-19 name=__codelineno-4-19></a><span class=w>      </span><span class=nt>affinity</span><span class=p>:</span>
</span><span id=__span-4-20><a id=__codelineno-4-20 name=__codelineno-4-20></a><span class=w>        </span><span class=nt>nodeAffinity</span><span class=p>:</span>
</span><span id=__span-4-21><a id=__codelineno-4-21 name=__codelineno-4-21></a><span class=w>          </span><span class=nt>requiredDuringSchedulingIgnoredDuringExecution</span><span class=p>:</span>
</span><span id=__span-4-22><a id=__codelineno-4-22 name=__codelineno-4-22></a><span class=w>            </span><span class=nt>nodeSelectorTerms</span><span class=p>:</span>
</span><span id=__span-4-23><a id=__codelineno-4-23 name=__codelineno-4-23></a><span class=w>            </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>matchExpressions</span><span class=p>:</span>
</span><span id=__span-4-24><a id=__codelineno-4-24 name=__codelineno-4-24></a><span class=w>              </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">node-role.kubernetes.io/master</span>
</span><span id=__span-4-25><a id=__codelineno-4-25 name=__codelineno-4-25></a><span class=w>                </span><span class=nt>operator</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Exists</span>
</span><span id=__span-4-26><a id=__codelineno-4-26 name=__codelineno-4-26></a><span class=w>            </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>matchExpressions</span><span class=p>:</span>
</span><span id=__span-4-27><a id=__codelineno-4-27 name=__codelineno-4-27></a><span class=w>              </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">node-role.kubernetes.io/control-plane</span>
</span><span id=__span-4-28><a id=__codelineno-4-28 name=__codelineno-4-28></a><span class=w>                </span><span class=nt>operator</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Exists</span>
</span><span id=__span-4-29><a id=__codelineno-4-29 name=__codelineno-4-29></a><span class=w>      </span><span class=nt>containers</span><span class=p>:</span>
</span><span id=__span-4-30><a id=__codelineno-4-30 name=__codelineno-4-30></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>args</span><span class=p>:</span>
</span><span id=__span-4-31><a id=__codelineno-4-31 name=__codelineno-4-31></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">manager</span>
</span><span id=__span-4-32><a id=__codelineno-4-32 name=__codelineno-4-32></a><span class=w>        </span><span class=nt>env</span><span class=p>:</span>
</span><span id=__span-4-33><a id=__codelineno-4-33 name=__codelineno-4-33></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">vip_arp</span>
</span><span id=__span-4-34><a id=__codelineno-4-34 name=__codelineno-4-34></a><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;true&quot;</span>
</span><span id=__span-4-35><a id=__codelineno-4-35 name=__codelineno-4-35></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
</span><span id=__span-4-36><a id=__codelineno-4-36 name=__codelineno-4-36></a><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;6443&quot;</span>
</span><span id=__span-4-37><a id=__codelineno-4-37 name=__codelineno-4-37></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">vip_interface</span>
</span><span id=__span-4-38><a id=__codelineno-4-38 name=__codelineno-4-38></a><span class=hll><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">enp0s1</span>
</span></span><span id=__span-4-39><a id=__codelineno-4-39 name=__codelineno-4-39></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">vip_cidr</span>
</span><span id=__span-4-40><a id=__codelineno-4-40 name=__codelineno-4-40></a><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;32&quot;</span>
</span><span id=__span-4-41><a id=__codelineno-4-41 name=__codelineno-4-41></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">dns_mode</span>
</span><span id=__span-4-42><a id=__codelineno-4-42 name=__codelineno-4-42></a><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">first</span>
</span><span id=__span-4-43><a id=__codelineno-4-43 name=__codelineno-4-43></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cp_enable</span>
</span><span id=__span-4-44><a id=__codelineno-4-44 name=__codelineno-4-44></a><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;true&quot;</span>
</span><span id=__span-4-45><a id=__codelineno-4-45 name=__codelineno-4-45></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cp_namespace</span>
</span><span id=__span-4-46><a id=__codelineno-4-46 name=__codelineno-4-46></a><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kube-system</span>
</span><span id=__span-4-47><a id=__codelineno-4-47 name=__codelineno-4-47></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">svc_enable</span>
</span><span id=__span-4-48><a id=__codelineno-4-48 name=__codelineno-4-48></a><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;true&quot;</span>
</span><span id=__span-4-49><a id=__codelineno-4-49 name=__codelineno-4-49></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">svc_leasename</span>
</span><span id=__span-4-50><a id=__codelineno-4-50 name=__codelineno-4-50></a><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">plndr-svcs-lock</span>
</span><span id=__span-4-51><a id=__codelineno-4-51 name=__codelineno-4-51></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">vip_leaderelection</span>
</span><span id=__span-4-52><a id=__codelineno-4-52 name=__codelineno-4-52></a><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;true&quot;</span>
</span><span id=__span-4-53><a id=__codelineno-4-53 name=__codelineno-4-53></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">vip_leasename</span>
</span><span id=__span-4-54><a id=__codelineno-4-54 name=__codelineno-4-54></a><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">plndr-cp-lock</span>
</span><span id=__span-4-55><a id=__codelineno-4-55 name=__codelineno-4-55></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">vip_leaseduration</span>
</span><span id=__span-4-56><a id=__codelineno-4-56 name=__codelineno-4-56></a><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;5&quot;</span>
</span><span id=__span-4-57><a id=__codelineno-4-57 name=__codelineno-4-57></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">vip_renewdeadline</span>
</span><span id=__span-4-58><a id=__codelineno-4-58 name=__codelineno-4-58></a><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;3&quot;</span>
</span><span id=__span-4-59><a id=__codelineno-4-59 name=__codelineno-4-59></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">vip_retryperiod</span>
</span><span id=__span-4-60><a id=__codelineno-4-60 name=__codelineno-4-60></a><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;1&quot;</span>
</span><span id=__span-4-61><a id=__codelineno-4-61 name=__codelineno-4-61></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">address</span>
</span><span id=__span-4-62><a id=__codelineno-4-62 name=__codelineno-4-62></a><span class=hll><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">192.168.2.180</span>
</span></span><span id=__span-4-63><a id=__codelineno-4-63 name=__codelineno-4-63></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">prometheus_server</span>
</span><span id=__span-4-64><a id=__codelineno-4-64 name=__codelineno-4-64></a><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">:2112</span>
</span><span id=__span-4-65><a id=__codelineno-4-65 name=__codelineno-4-65></a><span class=w>        </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ghcr.io/kube-vip/kube-vip:v0.7.2</span>
</span><span id=__span-4-66><a id=__codelineno-4-66 name=__codelineno-4-66></a><span class=w>        </span><span class=nt>imagePullPolicy</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Always</span>
</span><span id=__span-4-67><a id=__codelineno-4-67 name=__codelineno-4-67></a><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kube-vip</span>
</span><span id=__span-4-68><a id=__codelineno-4-68 name=__codelineno-4-68></a><span class=w>        </span><span class=nt>resources</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{}</span>
</span><span id=__span-4-69><a id=__codelineno-4-69 name=__codelineno-4-69></a><span class=w>        </span><span class=nt>securityContext</span><span class=p>:</span>
</span><span id=__span-4-70><a id=__codelineno-4-70 name=__codelineno-4-70></a><span class=w>          </span><span class=nt>capabilities</span><span class=p>:</span>
</span><span id=__span-4-71><a id=__codelineno-4-71 name=__codelineno-4-71></a><span class=w>            </span><span class=nt>add</span><span class=p>:</span>
</span><span id=__span-4-72><a id=__codelineno-4-72 name=__codelineno-4-72></a><span class=w>            </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">NET_ADMIN</span>
</span><span id=__span-4-73><a id=__codelineno-4-73 name=__codelineno-4-73></a><span class=w>            </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">NET_RAW</span>
</span><span id=__span-4-74><a id=__codelineno-4-74 name=__codelineno-4-74></a><span class=w>      </span><span class=nt>hostNetwork</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-4-75><a id=__codelineno-4-75 name=__codelineno-4-75></a><span class=w>      </span><span class=nt>serviceAccountName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kube-vip</span>
</span><span id=__span-4-76><a id=__codelineno-4-76 name=__codelineno-4-76></a><span class=w>      </span><span class=nt>tolerations</span><span class=p>:</span>
</span><span id=__span-4-77><a id=__codelineno-4-77 name=__codelineno-4-77></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>effect</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">NoSchedule</span>
</span><span id=__span-4-78><a id=__codelineno-4-78 name=__codelineno-4-78></a><span class=w>        </span><span class=nt>operator</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Exists</span>
</span><span id=__span-4-79><a id=__codelineno-4-79 name=__codelineno-4-79></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>effect</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">NoExecute</span>
</span><span id=__span-4-80><a id=__codelineno-4-80 name=__codelineno-4-80></a><span class=w>        </span><span class=nt>operator</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Exists</span>
</span><span id=__span-4-81><a id=__codelineno-4-81 name=__codelineno-4-81></a><span class=w>  </span><span class=nt>updateStrategy</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{}</span>
</span></code></pre></div></td></tr></table></div> <p>Lines 5, 7, 12, 16, 38 and 62 need modifying to your environment.</p> <details class=example> <summary>Install the kube-vip Daemonset</summary> <p><a class=glightbox href=..%2Fimages%2Fkube_vip%2Fkube_vip_install_daemonset.gif data-type=image data-width=auto data-height=auto data-title=kube_vip_install_daemonset.gif data-desc-position=bottom><img alt=kube_vip_install_daemonset.gif src=..%2Fimages%2Fkube_vip%2Fkube_vip_install_daemonset.gif></a></p> </details> <div class="admonition note"> <p class=admonition-title>ARP or BGP</p> <p>The Daemonset above uses ARP to communicate with the network it is also possible to use BGP. <a href=https://kube-vip.io/docs/installation/daemonset/#bgp-example-for-daemonset><strong><em>See Here</em></strong></a></p> </div> <details class=example> <summary>Example showing DHCP allocated external IP address to the Ingress Controller</summary> <p><a class=glightbox href=../../images/ingress_not_pending.png data-type=image data-width=auto data-height=auto data-title=ingress_not_pending.png data-desc-position=bottom><img alt=ingress_not_pending.png src=../../images/ingress_not_pending.png></a></p> </details> <p>Our <code>ingress-nginx-controller</code> has been allocated the IP Address <code>192.168.2.194</code>. </p> <div class="admonition note"> <p class=admonition-title>Ingress Access</p> <p>The <code>ingress-niginx-controller</code> requires the host FQDN to be on the user requests in order to know how to route the requests to the correct Kubernetes Service. Using the iP address in the URL will cause an error as ingress cannot select the correct service.</p> </div> <details class=example> <summary>List Ingress</summary> <p><a class=glightbox href=..%2Fimages%2Fkube_vip%2Fkube_vip_get_ing.gif data-type=image data-width=auto data-height=auto data-title=kube_vip_get_ing.gif data-desc-position=bottom><img alt=kube_vip_get_ing.gif src=..%2Fimages%2Fkube_vip%2Fkube_vip_get_ing.gif></a></p> </details> <p><a class=glightbox href=../../images/kube_vip/get_ing.png data-type=image data-width=auto data-height=auto data-title=get_ing.png data-desc-position=bottom><img alt=get_ing.png src=../../images/kube_vip/get_ing.png></a></p> <p>If you did not set the FQDN of the Kinetica Cluster to a DNS resolvable hostname add <code>local.kinetica</code> to your <code>/etc/hosts/</code> file in order to be able to access the Kinetica URLs</p> <details class=example> <summary>Edit /etc/hosts</summary> <p><a class=glightbox href=..%2Fimages%2Fkube_vip%2Fkube_vip_etc_hosts.gif data-type=image data-width=auto data-height=auto data-title=kube_vip_etc_hosts.gif data-desc-position=bottom><img alt=kube_vip_etc_hosts.gif src=..%2Fimages%2Fkube_vip%2Fkube_vip_etc_hosts.gif></a></p> </details> <div class="admonition success"> <p class=admonition-title>Accessing the Workbench</p> <p>You should be able to access the workbench at <a href=http://local.kinetica title="Workbench URL">http://local.kinetica</a></p> </div> <hr> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2016 - 2024 Kinetica DB Inc. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "../..", "features": ["announce.dismiss", "content.tooltips", "content.code.copy", "content.code.annotate", "content.tabs.link", "header.autohide", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.progress", "navigation.prune", "navigation.sections", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "tags", "navigation.tabs", "navigation.tabs.sticky"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.c8d2eff1.min.js></script> <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body> </html>